<script>
    $(document).ready(function() {
        sessionStorage.clear('cross_chapterId');
    });

    $.ajaxSetup({
        beforeSend: function (xhr,settings) {
            const crossChapterId = sessionStorage.getItem('cross_chapterId');
            const {url} = settings;

            const findBySentenceUrl = url.startsWith('/admin/ncert_sentences') || 
                url.startsWith('/admin/video_sentences');

            // intercept requests for finding ncert sentences if chapterId is given
            if (!!crossChapterId && findBySentenceUrl) {
                const updatedUrl = new URL(window.location.origin + url);
                updatedUrl.searchParams.set('q[chapterId_eq]', crossChapterId);
                updatedUrl.searchParams.set('q[noteId_in][]', null);

                // get relative url
                const updatedRelativeUrl = updatedUrl.toString().split(window.location.host).pop();
                settings.url = updatedRelativeUrl;
            }
        }
    });

</script>
