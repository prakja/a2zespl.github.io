<%= render 'mathjax' %>
<h1>Probable duplicates from chapter <%=@test.name%></h1>
<style>
table {border-collapse:collapse; table-layout:fixed; width:100%;}
table td {border:solid 1px #fab; width:100px; word-wrap:break-word;}
</style>
<div>
  <table>
    <tr><th><h4>Older Question</h4></th><th><h4>Newer Question (Possible duplicate)</h4></th></tr>
    <% @question_pairs.each do |question_pair| %>
      <tr id="q_<%=question_pair[0]%>_<%=question_pair[2]%>">
        <td style="vertical-align: top;"><a target="_blank" href="/admin/questions/<%=question_pair[0]%>/edit"><b>ID: <%=question_pair[0]%></b></a><b><br /><br />Question:</b> <%=raw(question_pair[1])%><div><b>Answer: <%=question_pair[4].blank? || question_pair[6].blank? ? "" : JSON.parse(question_pair[6])[question_pair[4]]%></b><br /><br /></div><b>Explanation:</b> <%=raw(question_pair[8])%><%=button_to 'Remove Question', {controller: 'admin/tests', action: 'remove_duplicate', delete_question_id: question_pair[0], retain_question_id: question_pair[2]}, method: :post, remote: true, data: { confirm: 'Delete this question and retain the other one?' }%></td>
        <td style="vertical-align: top;"><a target="_blank" href="/admin/questions/<%=question_pair[2]%>/edit"><b>ID: <%=question_pair[2]%></b></a><b><br /><br />Question:</b> <%=raw(question_pair[3])%><div><b>Answer: <%=question_pair[5].blank? || question_pair[7].blank? ? "" : JSON.parse(question_pair[7])[question_pair[5]]%></b><br /><br /></div><b>Explanation:</b> <%=raw(question_pair[9])%><%=button_to 'Remove Question', {controller: 'admin/tests', action: 'remove_duplicate', delete_question_id: question_pair[2], retain_question_id: question_pair[0]}, method: :post, remote: true, data: { confirm: 'Delete this question and retain the other one?' }%></td>
      </tr>
    <% end %>
  </table>
</div>
